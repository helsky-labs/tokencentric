@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  font-family:
    -apple-system,
    BlinkMacSystemFont,
    'Segoe UI',
    Roboto,
    Oxygen,
    Ubuntu,
    Cantarell,
    'Open Sans',
    'Helvetica Neue',
    sans-serif;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #9ca3af;
  border-radius: 4px;
}

.dark ::-webkit-scrollbar-thumb {
  background: #4b5563;
}

::-webkit-scrollbar-thumb:hover {
  background: #6b7280;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: #6b7280;
}

/* Draggable title bar area */
.titlebar-drag {
  -webkit-app-region: drag;
}

.titlebar-no-drag {
  -webkit-app-region: no-drag;
}

/* Tree view */
.tree-item {
  @apply flex items-center gap-2 px-2 py-1.5 rounded-lg cursor-pointer transition-colors;
}

.tree-item:hover {
  @apply bg-slate-50 dark:bg-slate-800;
}

.tree-item.selected {
  @apply bg-emerald-50 dark:bg-emerald-900/20;
}

/* Tree view - directories */
.tree-root {
  @apply px-1;
}

.tree-directory-header {
  @apply flex items-center gap-1.5 py-2 pr-2 rounded-lg cursor-pointer transition-colors;
  @apply text-gray-700 dark:text-gray-300;
  margin: 2px 0;
}

.tree-directory-header:hover {
  @apply bg-slate-200/50 dark:bg-slate-700/40;
}

.tree-folder-icon {
  @apply text-gray-400 dark:text-gray-500 flex-shrink-0;
}

/* Tree view - chevron */
.tree-chevron {
  @apply w-4 h-4 flex items-center justify-center flex-shrink-0;
  @apply text-gray-400 dark:text-gray-500;
  transition: transform 0.15s ease;
}

.tree-chevron.expanded {
  transform: rotate(90deg);
}

/* Tree view - files */
.tree-file {
  @apply flex items-center gap-2 py-2 px-2 rounded-lg cursor-pointer transition-colors;
  @apply bg-slate-100/50 dark:bg-slate-800/30;
  margin: 2px 4px;
}

.tree-file:hover {
  @apply bg-slate-200/70 dark:bg-slate-700/50;
}

.tree-file.selected {
  @apply bg-emerald-100 dark:bg-emerald-900/40 text-emerald-800 dark:text-emerald-200;
}

/* Tree children container */
.tree-children {
  @apply overflow-hidden;
}

/* Breadcrumb */
.breadcrumb-container {
  @apply flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400 overflow-x-auto;
}

.breadcrumb-label {
  @apply text-gray-400 dark:text-gray-500 flex-shrink-0 mr-1;
}

.breadcrumb-path {
  @apply truncate;
}

.breadcrumb-separator {
  @apply text-gray-300 dark:text-gray-600 flex-shrink-0;
}

.breadcrumb-arrow {
  @apply text-gray-300 dark:text-gray-600 flex-shrink-0 mx-0.5;
}

.breadcrumb-item-wrapper {
  @apply flex items-center flex-shrink-0;
}

.breadcrumb-item {
  @apply px-1.5 py-0.5 rounded text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors;
}

.breadcrumb-current {
  @apply font-medium text-gray-700 dark:text-gray-300 flex-shrink-0;
}

/* Global Config Section */
.global-config-section {
  @apply bg-purple-50/30 dark:bg-purple-950/20;
}

/* Remove border from inner sidebar-section since parent handles it */
.global-config-section .sidebar-section {
  @apply border-b-0;
}

.global-config-content {
  @apply px-1;
}

.global-config-item {
  @apply flex items-center gap-2 py-2 px-2 mx-1 rounded-lg cursor-pointer transition-colors;
  @apply text-gray-700 dark:text-gray-300;
  @apply bg-purple-50/50 dark:bg-purple-900/20;
  margin-bottom: 2px;
}

.global-config-item:hover {
  @apply bg-purple-100 dark:bg-purple-900/40;
}

.global-config-item.selected {
  @apply bg-purple-200 dark:bg-purple-800/50 text-purple-800 dark:text-purple-200;
}

.global-config-item.read-only {
  @apply opacity-80;
}

.global-config-children {
  @apply overflow-hidden;
}

/* AI Actions Toolbar */
.ai-toolbar {
  @apply flex flex-col gap-2 px-4 py-2;
  @apply bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20;
  @apply border-b border-purple-200 dark:border-purple-800/50;
}

/* AI Instructions Section */
.ai-instructions-section {
  @apply w-full;
}

.ai-instructions-toggle {
  @apply flex items-center gap-1.5 text-xs text-gray-600 dark:text-gray-400 cursor-pointer;
  @apply hover:text-purple-600 dark:hover:text-purple-400 transition-colors;
}

.ai-icon-small {
  @apply w-3 h-3;
}

.ai-instructions-badge {
  @apply ml-1 px-1.5 py-0.5 text-xs font-medium rounded-full;
  @apply bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300;
}

.ai-instructions-input {
  @apply w-full mt-2 px-3 py-2 text-sm rounded-md resize-none;
  @apply bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700;
  @apply text-gray-700 dark:text-gray-300 placeholder-gray-400 dark:placeholder-gray-500;
  @apply focus:outline-none focus:ring-2 focus:ring-purple-500 dark:focus:ring-purple-600;
}

.ai-toolbar-disabled {
  @apply bg-gray-50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700;
}

.ai-toolbar-message {
  @apply text-sm text-gray-500 dark:text-gray-400;
}

.ai-toolbar-buttons {
  @apply flex items-center gap-2;
}

.ai-btn {
  @apply inline-flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-all;
  @apply disabled:opacity-50 disabled:cursor-not-allowed;
}

.ai-btn-action {
  @apply bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700;
  @apply text-gray-700 dark:text-gray-300;
  @apply hover:bg-purple-50 dark:hover:bg-purple-900/30 hover:border-purple-300 dark:hover:border-purple-700;
  @apply hover:text-purple-700 dark:hover:text-purple-300;
}

.ai-btn-primary {
  @apply bg-purple-600 dark:bg-purple-700 text-white;
  @apply hover:bg-purple-700 dark:hover:bg-purple-600;
}

.ai-btn-secondary {
  @apply bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300;
  @apply hover:bg-gray-200 dark:hover:bg-gray-700;
}

.ai-icon {
  @apply w-4 h-4;
}

.ai-toolbar-provider {
  @apply text-xs text-gray-500 dark:text-gray-400;
}

/* AI Preview mode */
.ai-toolbar-preview {
  @apply flex-col items-stretch;
  @apply max-h-96;
}

.ai-toolbar-header {
  @apply flex items-center justify-between mb-2;
}

.ai-toolbar-status {
  @apply flex items-center gap-2 text-sm font-medium text-purple-700 dark:text-purple-300;
}

.ai-preview-content {
  @apply flex-1 overflow-auto bg-white dark:bg-gray-900 rounded-md p-3 mb-2;
  @apply border border-gray-200 dark:border-gray-700;
  max-height: 300px;
}

.ai-preview-content pre {
  @apply text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-mono;
}

.ai-toolbar-actions {
  @apply flex items-center gap-2 pt-2 border-t border-gray-200 dark:border-gray-700;
}

/* AI Error */
.ai-toolbar-error {
  @apply bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800/50;
}

.ai-error-message {
  @apply text-sm text-red-600 dark:text-red-400;
}

/* AI Spinner */
.ai-spinner {
  @apply w-4 h-4 border-2 border-purple-300 dark:border-purple-700 border-t-purple-600 dark:border-t-purple-400 rounded-full;
  animation: ai-spin 0.8s linear infinite;
}

@keyframes ai-spin {
  to {
    transform: rotate(360deg);
  }
}

/* Drag and Drop */
.dragging {
  @apply opacity-50;
}

.drop-target-active {
  @apply ring-2 ring-inset ring-blue-500 bg-blue-50/20 dark:bg-blue-900/20;
}

/* File Info Bar */
.file-info-bar {
  @apply transition-all;
}

.file-info-bar-header {
  min-height: 28px;
}

.file-info-bar-expanded {
  @apply border-t border-gray-100 dark:border-gray-800;
}

.file-info-badge {
  @apply text-xs px-1.5 py-0.5 rounded flex-shrink-0 flex items-center gap-1;
}

.file-info-badge-readonly {
  @apply bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400;
}

.file-info-badge-unsaved {
  @apply bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300;
}

/* AI Actions Popover */
.ai-popover {
  @apply z-50 w-80 bg-white dark:bg-gray-900 rounded-lg shadow-xl;
  @apply border border-gray-200 dark:border-gray-700;
  @apply overflow-hidden;
}

.ai-popover-header {
  @apply flex items-center justify-between px-3 py-2;
  @apply bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20;
  @apply border-b border-gray-200 dark:border-gray-700;
}

.ai-popover-title {
  @apply text-sm font-medium text-gray-800 dark:text-gray-200;
}

.ai-popover-provider {
  @apply text-xs text-gray-500 dark:text-gray-400;
}

.ai-popover-close {
  @apply p-1 rounded text-gray-400 hover:text-gray-600 dark:hover:text-gray-300;
  @apply hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors;
  @apply disabled:opacity-50 disabled:cursor-not-allowed;
}

.ai-popover-body {
  @apply p-3 space-y-3;
}

.ai-popover-instructions {
  @apply w-full;
}

.ai-popover-textarea {
  @apply w-full px-3 py-2 text-sm rounded-md resize-none;
  @apply bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700;
  @apply text-gray-700 dark:text-gray-300 placeholder-gray-400 dark:placeholder-gray-500;
  @apply focus:outline-none focus:ring-2 focus:ring-purple-500 dark:focus:ring-purple-600;
}

.ai-popover-buttons {
  @apply flex flex-wrap gap-2;
}

.ai-popover-message {
  @apply p-4 text-sm text-gray-500 dark:text-gray-400;
}

.ai-popover-preview {
  @apply p-3;
}

.ai-popover-status {
  @apply flex items-center gap-2 text-sm font-medium text-purple-700 dark:text-purple-300 mb-2;
}

.ai-popover-content {
  @apply max-h-48 overflow-auto bg-gray-50 dark:bg-gray-800 rounded-md p-3 mb-3;
  @apply border border-gray-200 dark:border-gray-700;
}

.ai-popover-content pre {
  @apply text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-mono;
}

.ai-popover-actions {
  @apply flex items-center gap-2 pt-2 border-t border-gray-200 dark:border-gray-700;
}

.ai-popover-error {
  @apply p-3 flex items-center gap-2;
  @apply bg-red-50 dark:bg-red-900/20;
}

/* ============================================
   Sidebar Section - Reusable collapsible
   ============================================ */
.sidebar-section {
  @apply border-b border-gray-200 dark:border-gray-700;
}

.sidebar-section-header {
  @apply flex items-center gap-2 px-3 py-2 cursor-pointer;
  @apply text-xs font-semibold uppercase tracking-wider;
  @apply hover:bg-gray-100 dark:hover:bg-gray-800/50 transition-colors;
  min-height: 28px;
}

.sidebar-section-header-default {
  @apply text-slate-600 dark:text-slate-400;
  @apply bg-slate-100/50 dark:bg-slate-800/30;
}

.sidebar-section-header-purple {
  @apply text-purple-700 dark:text-purple-300;
  @apply bg-purple-100/50 dark:bg-purple-900/30;
}

.sidebar-section-header-purple:hover {
  @apply bg-purple-100 dark:bg-purple-900/40;
}

.sidebar-section-header-teal {
  @apply text-teal-700 dark:text-teal-300;
  @apply bg-teal-100/50 dark:bg-teal-900/30;
}

.sidebar-section-header-teal:hover {
  @apply bg-teal-100 dark:bg-teal-900/40;
}

.sidebar-section-chevron {
  @apply w-4 h-4 flex items-center justify-center flex-shrink-0;
  @apply text-gray-400 dark:text-gray-500;
  transition: transform 0.15s ease;
}

.sidebar-section-chevron.expanded {
  transform: rotate(90deg);
}

.sidebar-section-subtitle {
  @apply text-xs font-normal ml-auto;
  @apply text-gray-500 dark:text-gray-400;
}

.sidebar-section-badge {
  @apply text-xs font-normal px-1.5 py-0.5 rounded;
  @apply bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400;
}

.sidebar-section-actions {
  @apply flex items-center gap-1 ml-1;
}

.sidebar-section-content {
  @apply pb-2;
}

/* ============================================
   Template Items - Draggable templates
   ============================================ */
.template-item {
  @apply flex flex-col gap-0.5 py-2 px-2 mx-1 rounded-lg cursor-grab;
  @apply bg-teal-50/50 dark:bg-teal-900/20;
  @apply hover:bg-teal-100 dark:hover:bg-teal-900/40 transition-colors;
  margin-bottom: 2px;
}

.template-item.dragging {
  @apply opacity-50 cursor-grabbing;
}

.template-item-name {
  @apply text-sm font-medium text-gray-700 dark:text-gray-300 truncate;
}

.template-item-desc {
  @apply text-xs text-gray-500 dark:text-gray-400 truncate;
}

.template-item-category {
  @apply text-xs px-1.5 py-0.5 rounded ml-auto flex-shrink-0;
}

/* Category colors for templates */
.template-category-minimal {
  @apply bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300;
}

.template-category-fullstack {
  @apply bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300;
}

.template-category-backend {
  @apply bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300;
}

.template-category-mobile {
  @apply bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300;
}

.template-category-safety {
  @apply bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300;
}

.template-category-general {
  @apply bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300;
}

/* Drop target for folders when dropping templates */
.tree-directory.template-drop-target > .tree-directory-header {
  @apply bg-teal-100 dark:bg-teal-900/50;
  @apply ring-2 ring-inset ring-teal-400 dark:ring-teal-600;
}
