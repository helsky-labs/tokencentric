@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  font-family:
    'SF Pro',
    -apple-system,
    BlinkMacSystemFont,
    'Segoe UI',
    Roboto,
    Oxygen,
    Ubuntu,
    Cantarell,
    'Open Sans',
    'Helvetica Neue',
    sans-serif;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #B8BCC2;
  border-radius: 4px;
}

.dark ::-webkit-scrollbar-thumb {
  background: #525961;
}

::-webkit-scrollbar-thumb:hover {
  background: #7D8188;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: #7D8188;
}

/* Draggable title bar area */
.titlebar-drag {
  -webkit-app-region: drag;
}

.titlebar-no-drag {
  -webkit-app-region: no-drag;
}

/* Tree view */
.tree-item {
  @apply flex items-center gap-2 px-2 py-1.5 rounded-lg cursor-pointer transition-colors;
}

.tree-item:hover {
  @apply bg-light-surface dark:bg-surface-card;
}

.tree-item.selected {
  @apply bg-brand-teal/10 dark:bg-brand-teal/20;
}

/* Tree view - directories */
.tree-root {
  @apply px-1;
}

.tree-directory-header {
  @apply flex items-center gap-1.5 py-2 pr-2 rounded-lg cursor-pointer transition-colors;
  @apply text-gray-700 dark:text-content-secondary;
  margin: 2px 0;
}

.tree-directory-header:hover {
  @apply bg-light-border/50 dark:bg-surface-hover/40;
}

.tree-folder-icon {
  @apply text-content-tertiary flex-shrink-0;
}

/* Tree view - chevron */
.tree-chevron {
  @apply w-4 h-4 flex items-center justify-center flex-shrink-0;
  @apply text-content-tertiary;
  transition: transform 0.15s ease;
}

.tree-chevron.expanded {
  transform: rotate(90deg);
}

/* Tree view - files */
.tree-file {
  @apply flex items-center gap-2 py-2 px-2 rounded-lg cursor-pointer transition-colors;
  @apply bg-light-surface/50 dark:bg-surface-card/30;
  margin: 2px 4px;
}

.tree-file:hover {
  @apply bg-light-border/70 dark:bg-surface-hover/50;
}

.tree-file.selected {
  @apply bg-brand-teal/15 dark:bg-brand-teal/25 text-brand-teal-deep dark:text-brand-teal-bright;
}

/* Tree children container */
.tree-children {
  @apply overflow-hidden;
}

/* Breadcrumb */
.breadcrumb-container {
  @apply flex items-center gap-1 text-xs text-content-tertiary overflow-x-auto;
}

.breadcrumb-label {
  @apply text-content-tertiary flex-shrink-0 mr-1;
}

.breadcrumb-path {
  @apply truncate;
}

.breadcrumb-separator {
  @apply text-light-border dark:text-surface-border flex-shrink-0;
}

.breadcrumb-arrow {
  @apply text-light-border dark:text-surface-border flex-shrink-0 mx-0.5;
}

.breadcrumb-item-wrapper {
  @apply flex items-center flex-shrink-0;
}

.breadcrumb-item {
  @apply px-1.5 py-0.5 rounded text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors;
}

.breadcrumb-current {
  @apply font-medium text-gray-700 dark:text-content-secondary flex-shrink-0;
}

/* Global Config Section */
.global-config-section {
  @apply bg-ai/5 dark:bg-ai/10;
}

/* Remove border from inner sidebar-section since parent handles it */
.global-config-section .sidebar-section {
  @apply border-b-0;
}

.global-config-content {
  @apply px-1;
}

.global-config-item {
  @apply flex items-center gap-2 py-2 px-2 mx-1 rounded-lg cursor-pointer transition-colors;
  @apply text-gray-700 dark:text-content-secondary;
  @apply bg-ai/5 dark:bg-ai/10;
  margin-bottom: 2px;
}

.global-config-item:hover {
  @apply bg-ai/15 dark:bg-ai/20;
}

.global-config-item.selected {
  @apply bg-ai/25 dark:bg-ai/30 text-ai-deep dark:text-ai-light;
}

.global-config-item.read-only {
  @apply opacity-80;
}

.global-config-children {
  @apply overflow-hidden;
}

/* AI Actions Toolbar */
.ai-toolbar {
  @apply flex flex-col gap-2 px-4 py-2;
  @apply bg-gradient-to-r from-ai/10 to-brand-teal/10 dark:from-ai/15 dark:to-brand-teal/15;
  @apply border-b border-ai/20 dark:border-ai/30;
}

/* AI Instructions Section */
.ai-instructions-section {
  @apply w-full;
}

.ai-instructions-toggle {
  @apply flex items-center gap-1.5 text-xs text-content-tertiary cursor-pointer;
  @apply hover:text-ai-deep dark:hover:text-ai-light transition-colors;
}

.ai-icon-small {
  @apply w-3 h-3;
}

.ai-instructions-badge {
  @apply ml-1 px-1.5 py-0.5 text-xs font-medium rounded-full;
  @apply bg-ai/15 dark:bg-ai/25 text-ai-deep dark:text-ai-light;
}

.ai-instructions-input {
  @apply w-full mt-2 px-3 py-2 text-sm rounded-md resize-none;
  @apply bg-light-bg dark:bg-surface-bg border border-light-border dark:border-surface-border;
  @apply text-gray-700 dark:text-content-secondary placeholder-content-tertiary;
  @apply focus:outline-none focus:ring-2 focus:ring-ai dark:focus:ring-ai;
}

.ai-toolbar-disabled {
  @apply bg-light-surface dark:bg-surface-card/50 border-light-border dark:border-surface-border;
}

.ai-toolbar-message {
  @apply text-sm text-content-tertiary;
}

.ai-toolbar-buttons {
  @apply flex items-center gap-2;
}

.ai-btn {
  @apply inline-flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-all;
  @apply disabled:opacity-50 disabled:cursor-not-allowed;
}

.ai-btn-action {
  @apply bg-light-bg dark:bg-surface-card border border-light-border dark:border-surface-border;
  @apply text-gray-700 dark:text-content-secondary;
  @apply hover:bg-ai/10 dark:hover:bg-ai/20 hover:border-ai/40 dark:hover:border-ai/50;
  @apply hover:text-ai-deep dark:hover:text-ai-light;
}

.ai-btn-primary {
  @apply bg-ai dark:bg-ai-deep text-white;
  @apply hover:bg-ai-deep dark:hover:bg-ai;
}

.ai-btn-secondary {
  @apply bg-light-surface dark:bg-surface-card text-gray-700 dark:text-content-secondary;
  @apply hover:bg-light-border dark:hover:bg-surface-hover;
}

.ai-icon {
  @apply w-4 h-4;
}

.ai-toolbar-provider {
  @apply text-xs text-content-tertiary;
}

/* AI Preview mode */
.ai-toolbar-preview {
  @apply flex-col items-stretch;
  @apply max-h-96;
}

.ai-toolbar-header {
  @apply flex items-center justify-between mb-2;
}

.ai-toolbar-status {
  @apply flex items-center gap-2 text-sm font-medium text-ai-deep dark:text-ai-light;
}

.ai-preview-content {
  @apply flex-1 overflow-auto bg-light-bg dark:bg-surface-bg rounded-md p-3 mb-2;
  @apply border border-light-border dark:border-surface-border;
  max-height: 300px;
}

.ai-preview-content pre {
  @apply text-xs text-gray-700 dark:text-content-secondary whitespace-pre-wrap font-mono;
}

.ai-toolbar-actions {
  @apply flex items-center gap-2 pt-2 border-t border-light-border dark:border-surface-border;
}

/* AI Error */
.ai-toolbar-error {
  @apply bg-semantic-error/10 dark:bg-semantic-error/15 border-semantic-error/30 dark:border-semantic-error/40;
}

.ai-error-message {
  @apply text-sm text-semantic-error;
}

/* AI Spinner */
.ai-spinner {
  @apply w-4 h-4 border-2 border-ai/30 dark:border-ai/40 border-t-ai dark:border-t-ai-light rounded-full;
  animation: ai-spin 0.8s linear infinite;
}

@keyframes ai-spin {
  to {
    transform: rotate(360deg);
  }
}

/* Drag and Drop */
.dragging {
  @apply opacity-50;
}

.drop-target-active {
  @apply ring-2 ring-inset ring-blue-500 bg-blue-50/20 dark:bg-blue-900/20;
}

/* File Info Bar */
.file-info-bar {
  @apply transition-all;
}

.file-info-bar-header {
  min-height: 28px;
}

.file-info-bar-expanded {
  @apply border-t border-light-surface dark:border-surface-card;
}

.file-info-badge {
  @apply text-xs px-1.5 py-0.5 rounded flex-shrink-0 flex items-center gap-1;
}

.file-info-badge-readonly {
  @apply bg-light-surface dark:bg-surface-hover text-content-tertiary;
}

.file-info-badge-unsaved {
  @apply bg-semantic-warning/15 dark:bg-semantic-warning/20 text-semantic-warning dark:text-semantic-warning;
}

/* AI Actions Popover */
.ai-popover {
  @apply z-50 w-80 bg-light-bg dark:bg-surface-bg rounded-lg shadow-xl;
  @apply border border-light-border dark:border-surface-border;
  @apply overflow-hidden;
}

.ai-popover-header {
  @apply flex items-center justify-between px-3 py-2;
  @apply bg-gradient-to-r from-ai/10 to-brand-teal/10 dark:from-ai/15 dark:to-brand-teal/15;
  @apply border-b border-light-border dark:border-surface-border;
}

.ai-popover-title {
  @apply text-sm font-medium text-gray-800 dark:text-content-primary;
}

.ai-popover-provider {
  @apply text-xs text-content-tertiary;
}

.ai-popover-close {
  @apply p-1 rounded text-content-tertiary hover:text-gray-600 dark:hover:text-content-secondary;
  @apply hover:bg-light-surface dark:hover:bg-surface-card transition-colors;
  @apply disabled:opacity-50 disabled:cursor-not-allowed;
}

.ai-popover-body {
  @apply p-3 space-y-3;
}

.ai-popover-instructions {
  @apply w-full;
}

.ai-popover-textarea {
  @apply w-full px-3 py-2 text-sm rounded-md resize-none;
  @apply bg-light-surface dark:bg-surface-card border border-light-border dark:border-surface-border;
  @apply text-gray-700 dark:text-content-secondary placeholder-content-tertiary;
  @apply focus:outline-none focus:ring-2 focus:ring-ai dark:focus:ring-ai;
}

.ai-popover-buttons {
  @apply flex flex-wrap gap-2;
}

.ai-popover-message {
  @apply p-4 text-sm text-content-tertiary;
}

.ai-popover-preview {
  @apply p-3;
}

.ai-popover-status {
  @apply flex items-center gap-2 text-sm font-medium text-ai-deep dark:text-ai-light mb-2;
}

.ai-popover-content {
  @apply max-h-48 overflow-auto bg-light-surface dark:bg-surface-card rounded-md p-3 mb-3;
  @apply border border-light-border dark:border-surface-border;
}

.ai-popover-content pre {
  @apply text-xs text-gray-700 dark:text-content-secondary whitespace-pre-wrap font-mono;
}

.ai-popover-actions {
  @apply flex items-center gap-2 pt-2 border-t border-light-border dark:border-surface-border;
}

.ai-popover-error {
  @apply p-3 flex items-center gap-2;
  @apply bg-semantic-error/10 dark:bg-semantic-error/15;
}

/* ============================================
   Sidebar Section - Reusable collapsible
   ============================================ */
.sidebar-section {
  @apply border-b border-light-border dark:border-surface-border;
}

.sidebar-section-header {
  @apply flex items-center gap-2 px-3 py-2 cursor-pointer;
  @apply text-xs font-semibold uppercase tracking-wider;
  @apply hover:bg-light-surface dark:hover:bg-surface-card/50 transition-colors;
  min-height: 28px;
}

.sidebar-section-header-default {
  @apply text-content-tertiary dark:text-content-tertiary;
  @apply bg-light-surface/50 dark:bg-surface-card/30;
}

.sidebar-section-header-purple {
  @apply text-ai-deep dark:text-ai-light;
  @apply bg-ai/10 dark:bg-ai/15;
}

.sidebar-section-header-purple:hover {
  @apply bg-ai/15 dark:bg-ai/20;
}

.sidebar-section-header-teal {
  @apply text-brand-teal-deep dark:text-brand-teal-bright;
  @apply bg-brand-teal/10 dark:bg-brand-teal/15;
}

.sidebar-section-header-teal:hover {
  @apply bg-brand-teal/15 dark:bg-brand-teal/20;
}

.sidebar-section-chevron {
  @apply w-4 h-4 flex items-center justify-center flex-shrink-0;
  @apply text-content-tertiary;
  transition: transform 0.15s ease;
}

.sidebar-section-chevron.expanded {
  transform: rotate(90deg);
}

.sidebar-section-subtitle {
  @apply text-xs font-normal ml-auto;
  @apply text-content-tertiary;
}

.sidebar-section-badge {
  @apply text-xs font-normal px-1.5 py-0.5 rounded;
  @apply bg-light-border dark:bg-surface-hover text-content-tertiary;
}

.sidebar-section-actions {
  @apply flex items-center gap-1 ml-1;
}

.sidebar-section-content {
  @apply pb-2;
}

/* ============================================
   Template Items - Draggable templates
   ============================================ */
.template-item {
  @apply flex flex-col gap-0.5 py-2 px-2 mx-1 rounded-lg cursor-grab;
  @apply bg-brand-teal/5 dark:bg-brand-teal/10;
  @apply hover:bg-brand-teal/15 dark:hover:bg-brand-teal/20 transition-colors;
  margin-bottom: 2px;
}

.template-item.dragging {
  @apply opacity-50 cursor-grabbing;
}

.template-item-name {
  @apply text-sm font-medium text-gray-700 dark:text-content-secondary truncate;
}

.template-item-desc {
  @apply text-xs text-content-tertiary truncate;
}

.template-item-category {
  @apply text-xs px-1.5 py-0.5 rounded ml-auto flex-shrink-0;
}

/* Category colors for templates */
.template-category-minimal {
  @apply bg-light-surface text-gray-700 dark:bg-surface-hover dark:text-content-secondary;
}

.template-category-fullstack {
  @apply bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300;
}

.template-category-backend {
  @apply bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300;
}

.template-category-mobile {
  @apply bg-ai/15 text-ai-deep dark:bg-ai/25 dark:text-ai-light;
}

.template-category-safety {
  @apply bg-semantic-error/15 text-semantic-error dark:bg-semantic-error/25 dark:text-semantic-error;
}

.template-category-general {
  @apply bg-light-surface text-gray-700 dark:bg-surface-hover dark:text-content-secondary;
}

/* Drop target for folders when dropping templates */
.tree-directory.template-drop-target > .tree-directory-header {
  @apply bg-brand-teal/15 dark:bg-brand-teal/25;
  @apply ring-2 ring-inset ring-brand-teal dark:ring-brand-teal-bright;
}
